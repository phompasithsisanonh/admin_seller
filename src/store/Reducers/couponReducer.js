import { createAsyncThunk, createSlice } from "@reduxjs/toolkit";
import api from "../../api/api";

export const coupon_add = createAsyncThunk(
  "coupon/coupon_add",
  async (
    {
      code, // ðŸ”¹ à¸£à¸«à¸±à¸ªà¸„à¸¹à¸›à¸­à¸‡ à¹€à¸Šà¹ˆà¸™ 'DISCOUNT50'
      type, // ðŸ”¹ à¸›à¸£à¸°à¹€à¸ à¸—à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ ('percentage' = à¸¥à¸”à¹€à¸›à¹‡à¸™à¹€à¸›à¸­à¸£à¹Œà¹€à¸‹à¹‡à¸™à¸•à¹Œ, 'fixed' = à¸¥à¸”à¹€à¸›à¹‡à¸™à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™)
      value, // ðŸ”¹ à¸¡à¸¹à¸¥à¸„à¹ˆà¸²à¸ªà¹ˆà¸§à¸™à¸¥à¸” (à¹€à¸Šà¹ˆà¸™ 10% à¸«à¸£à¸·à¸­ 100 à¸šà¸²à¸—)
      minPurchase, // ðŸ”¹ à¸¢à¸­à¸”à¸‹à¸·à¹‰à¸­à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ à¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³ 500 à¸šà¸²à¸—)
      maxDiscount, // ðŸ”¹ à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™à¸¥à¸”à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ à¸¥à¸”à¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸” 200 à¸šà¸²à¸—)
      startDate, // ðŸ”¹ à¸§à¸±à¸™à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸—à¸µà¹ˆà¸„à¸¹à¸›à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ '2024-03-01')
      endDate, // ðŸ”¹ à¸§à¸±à¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ (à¹€à¸Šà¹ˆà¸™ '2024-03-31')
      status, // ðŸ”¹ à¸ªà¸–à¸²à¸™à¸°à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ ('active' = à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰, 'expired' = à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸, 'disabled' = à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™)
      usageLimit, // ðŸ”¹ à¸ˆà¸³à¸™à¸§à¸™à¸„à¸£à¸±à¹‰à¸‡à¸—à¸µà¹ˆà¸„à¸¹à¸›à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¹€à¸Šà¹ˆà¸™ 100 à¸„à¸£à¸±à¹‰à¸‡)
      applicableCategories, // ðŸ”¹ à¸£à¸²à¸¢à¸à¸²à¸£à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¸™à¸µà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ ['electronics', 'clothing'])
      applicableProducts, // ðŸ”¹ à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¸™à¸µà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ ['product123', 'product456'])
    },
    { rejectWithValue, fulfillWithValue }
  ) => {
    try {
      const { data } = await api.post(
        `/coupon-add`,
        {
          code, // ðŸ”¹ à¸£à¸«à¸±à¸ªà¸„à¸¹à¸›à¸­à¸‡ à¹€à¸Šà¹ˆà¸™ 'DISCOUNT50'
          type, // ðŸ”¹ à¸›à¸£à¸°à¹€à¸ à¸—à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ ('percentage' = à¸¥à¸”à¹€à¸›à¹‡à¸™à¹€à¸›à¸­à¸£à¹Œà¹€à¸‹à¹‡à¸™à¸•à¹Œ, 'fixed' = à¸¥à¸”à¹€à¸›à¹‡à¸™à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™)
          value, // ðŸ”¹ à¸¡à¸¹à¸¥à¸„à¹ˆà¸²à¸ªà¹ˆà¸§à¸™à¸¥à¸” (à¹€à¸Šà¹ˆà¸™ 10% à¸«à¸£à¸·à¸­ 100 à¸šà¸²à¸—)
          minPurchase, // ðŸ”¹ à¸¢à¸­à¸”à¸‹à¸·à¹‰à¸­à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ à¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³ 500 à¸šà¸²à¸—)
          maxDiscount, // ðŸ”¹ à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™à¸¥à¸”à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ à¸¥à¸”à¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸” 200 à¸šà¸²à¸—)
          startDate, // ðŸ”¹ à¸§à¸±à¸™à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸—à¸µà¹ˆà¸„à¸¹à¸›à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ '2024-03-01')
          endDate, // ðŸ”¹ à¸§à¸±à¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ (à¹€à¸Šà¹ˆà¸™ '2024-03-31')
          status, // ðŸ”¹ à¸ªà¸–à¸²à¸™à¸°à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ ('active' = à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰, 'expired' = à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸, 'disabled' = à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™)
          usageLimit, // ðŸ”¹ à¸ˆà¸³à¸™à¸§à¸™à¸„à¸£à¸±à¹‰à¸‡à¸—à¸µà¹ˆà¸„à¸¹à¸›à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¹€à¸Šà¹ˆà¸™ 100 à¸„à¸£à¸±à¹‰à¸‡)
          applicableCategories, // ðŸ”¹ à¸£à¸²à¸¢à¸à¸²à¸£à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¸™à¸µà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ ['electronics', 'clothing'])
          applicableProducts, // ðŸ”¹ à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¸™à¸µà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ ['product123', 'product456'])
        },
        {
          withCredentials: true,
        }
      );
      console.log(data);
      return fulfillWithValue(data);
    } catch (error) {
      // console.log(error.response.data)
      return rejectWithValue(error.response.data);
    }
  }
);
export const coupon_get = createAsyncThunk(
  "coupon/coupon_get",
  async (_, { rejectWithValue, fulfillWithValue }) => {
    try {
      const { data } = await api.get(`/get-coupon`, {
        withCredentials: true,
      });
      console.log(data);
      return fulfillWithValue(data);
    } catch (error) {
      // console.log(error.response.data)
      return rejectWithValue(error.response.data);
    }
  }
);
export const coupon_edit = createAsyncThunk(
  "coupon/coupon_edit",
  async (
    {
      couponId,
      code, // ðŸ”¹ à¸£à¸«à¸±à¸ªà¸„à¸¹à¸›à¸­à¸‡ à¹€à¸Šà¹ˆà¸™ 'DISCOUNT50'
      type, // ðŸ”¹ à¸›à¸£à¸°à¹€à¸ à¸—à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ ('percentage' = à¸¥à¸”à¹€à¸›à¹‡à¸™à¹€à¸›à¸­à¸£à¹Œà¹€à¸‹à¹‡à¸™à¸•à¹Œ, 'fixed' = à¸¥à¸”à¹€à¸›à¹‡à¸™à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™)
      value, // ðŸ”¹ à¸¡à¸¹à¸¥à¸„à¹ˆà¸²à¸ªà¹ˆà¸§à¸™à¸¥à¸” (à¹€à¸Šà¹ˆà¸™ 10% à¸«à¸£à¸·à¸­ 100 à¸šà¸²à¸—)
      minPurchase, // ðŸ”¹ à¸¢à¸­à¸”à¸‹à¸·à¹‰à¸­à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ à¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³ 500 à¸šà¸²à¸—)
      maxDiscount, // ðŸ”¹ à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™à¸¥à¸”à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ à¸¥à¸”à¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸” 200 à¸šà¸²à¸—)
      startDate, // ðŸ”¹ à¸§à¸±à¸™à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸—à¸µà¹ˆà¸„à¸¹à¸›à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ '2024-03-01')
      endDate, // ðŸ”¹ à¸§à¸±à¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ (à¹€à¸Šà¹ˆà¸™ '2024-03-31')
      status, // ðŸ”¹ à¸ªà¸–à¸²à¸™à¸°à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ ('active' = à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰, 'expired' = à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸, 'disabled' = à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™)
      usageLimit, // ðŸ”¹ à¸ˆà¸³à¸™à¸§à¸™à¸„à¸£à¸±à¹‰à¸‡à¸—à¸µà¹ˆà¸„à¸¹à¸›à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¹€à¸Šà¹ˆà¸™ 100 à¸„à¸£à¸±à¹‰à¸‡)
      applicableCategories, // ðŸ”¹ à¸£à¸²à¸¢à¸à¸²à¸£à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¸™à¸µà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ ['electronics', 'clothing'])
      applicableProducts, // ðŸ”¹ à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¸™à¸µà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ ['product123', 'product456'])
    },
    { rejectWithValue, fulfillWithValue }
  ) => {
    try {
      const { data } = await api.put(
        `/couponEdit`,
        {
          couponId,
          code, // ðŸ”¹ à¸£à¸«à¸±à¸ªà¸„à¸¹à¸›à¸­à¸‡ à¹€à¸Šà¹ˆà¸™ 'DISCOUNT50'
          type, // ðŸ”¹ à¸›à¸£à¸°à¹€à¸ à¸—à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ ('percentage' = à¸¥à¸”à¹€à¸›à¹‡à¸™à¹€à¸›à¸­à¸£à¹Œà¹€à¸‹à¹‡à¸™à¸•à¹Œ, 'fixed' = à¸¥à¸”à¹€à¸›à¹‡à¸™à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™)
          value, // ðŸ”¹ à¸¡à¸¹à¸¥à¸„à¹ˆà¸²à¸ªà¹ˆà¸§à¸™à¸¥à¸” (à¹€à¸Šà¹ˆà¸™ 10% à¸«à¸£à¸·à¸­ 100 à¸šà¸²à¸—)
          minPurchase, // ðŸ”¹ à¸¢à¸­à¸”à¸‹à¸·à¹‰à¸­à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ à¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³ 500 à¸šà¸²à¸—)
          maxDiscount, // ðŸ”¹ à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™à¸¥à¸”à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ à¸¥à¸”à¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸” 200 à¸šà¸²à¸—)
          startDate, // ðŸ”¹ à¸§à¸±à¸™à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸—à¸µà¹ˆà¸„à¸¹à¸›à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ '2024-03-01')
          endDate, // ðŸ”¹ à¸§à¸±à¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ (à¹€à¸Šà¹ˆà¸™ '2024-03-31')
          status, // ðŸ”¹ à¸ªà¸–à¸²à¸™à¸°à¸‚à¸­à¸‡à¸„à¸¹à¸›à¸­à¸‡ ('active' = à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰, 'expired' = à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸, 'disabled' = à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™)
          usageLimit, // ðŸ”¹ à¸ˆà¸³à¸™à¸§à¸™à¸„à¸£à¸±à¹‰à¸‡à¸—à¸µà¹ˆà¸„à¸¹à¸›à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¹€à¸Šà¹ˆà¸™ 100 à¸„à¸£à¸±à¹‰à¸‡)
          applicableCategories, // ðŸ”¹ à¸£à¸²à¸¢à¸à¸²à¸£à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¸™à¸µà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ ['electronics', 'clothing'])
          applicableProducts, // ðŸ”¹ à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰à¸„à¸¹à¸›à¸­à¸‡à¸™à¸µà¹‰à¹„à¸”à¹‰ (à¹€à¸Šà¹ˆà¸™ ['product123', 'product456'])
        },
        {
          withCredentials: true,
        }
      );
      console.log(data);
      return fulfillWithValue(data);
    } catch (error) {
      // console.log(error.response.data)
      return rejectWithValue(error.response.data);
    }
  }
);
export const couponReducer = createSlice({
  name: "coupon",
  initialState: {
    successMessage: "",
    errorMessage: "",
    loader: false,
    get_admin: [],
    get_coupon: [],
  },
  reducers: {
    messageClear: (state, _) => {
      state.errorMessage = "";
      state.successMessage = "";
    },
  },
  extraReducers: (builder) => {
    builder
      .addCase(coupon_add.pending, (state, { payload }) => {
        state.loader = true;
      })
      .addCase(coupon_add.rejected, (state, { payload }) => {
        state.loader = false;
        state.errorMessage = payload.message;
      })
      .addCase(coupon_add.fulfilled, (state, { payload }) => {
        state.successMessage = payload.message;
      })
      .addCase(coupon_get.fulfilled, (state, { payload }) => {
        state.get_coupon = payload.data;
      })
      .addCase(coupon_edit.pending, (state, { payload }) => {
        state.loader = true;
      })
      .addCase(coupon_edit.rejected, (state, { payload }) => {
        state.loader = false;
        state.errorMessage = payload.message;
      })
      .addCase(coupon_edit.fulfilled, (state, { payload }) => {
        state.loader = false;
        state.successMessage = payload.message;
      });
  },
});
export const { messageClear } = couponReducer.actions;
export default couponReducer.reducer;
